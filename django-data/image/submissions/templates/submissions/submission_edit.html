{% extends "base.html" %}

{% load validation_tags %}

{% block title %}
  Edit Submission Data for {{ submission.title }}
{% endblock title %}

{% block content %}
  <h1>Edit Submission Data for <em>{{ submission.title }}</em></h1>

  <table class="table table-hover table-responsive-sm">
    <thead>
      <tr>
        <th scope="col">Name</th>
        <th scope="col">Action</th>
        <th scope="col">Biosample ID</th>
        <th scope="col">Validation</th>
        <th scope="col">Last Changed</th>
        <th scope="col">Last Submitted</th>
      </tr>
    </thead>
    <tbody>
      {% for name in object_list %}
        <tr class="{% cycle 'table-primary' 'table-secondary' %}">
          <th><a href="{% if name.animal %}{% url 'animals:detail' pk=name.animal.pk %}{% elif name.sample %}{% url 'samples:detail' pk=name.sample.pk %}{% endif %}">{{ name.name|truncatechars:30 }}</a></th>
          <td>
            {% if name.animal %}
              {% include "animals/animal_buttons.html" with animal=name.animal %}
            {% elif name.sample %}
              {% include "samples/sample_buttons.html" with sample=name.sample %}
            {% endif %}
            {# deal with name.samples #}
          </td>
          <td>{{ name.biosample_id }}</td>
          <td>{{ name|get_badge }}</td>
          <td>{{ name.last_changed }}</td>
          <td>{{ name.last_submitted }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  {% include 'includes/pagination.html' %}

  <p>
    Check my <a href="{% url 'language:species' %}?country={{ submission.gene_bank_country.label|urlencode }}">Species Translation Table</a>
  </p>
  <p class="container mt-3">
    <div class="row">
      <div class="col-lg-4 col-md-12 mt-2 lead text-center">
        <a class="btn btn-primary btn-lg btn-block" href="{% url 'submissions:detail' pk=submission.pk %}" role="button">Back to Submission Detail</a>
      </div>
      <div class="col-lg-4 col-md-6 mt-2 lead text-center">
        <a class="btn btn-info btn-lg btn-block" href="{% url 'submissions:list' %}" role="button">Back to Submissions List</a>
      </div>
      <div class="col-lg-4 col-md-6 mt-2 lead text-center">
        <a class="btn btn-secondary btn-lg btn-block" href="{% url 'image_app:dashboard' %}" role="button">Return to Dashboard</a>
      </div>
    </div>
  </p>

{% endblock content %}

{% block custom-js %}
  <script>
  // Jquery called when document is loaded
  $(document).ready(function(){
    $('[data-toggle="tooltip"]').tooltip();
  });
  </script>
{% endblock %}
